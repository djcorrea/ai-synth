<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste: Sugest√µes IA com Labels Amig√°veis</title>
    <link rel="stylesheet" href="public/friendly-labels.css">
    <style>
        body {
            background: #1a1a1a;
            color: #fff;
            font-family: 'Segoe UI', system-ui, sans-serif;
            margin: 20px;
        }
        .test-section {
            background: #2a2a2a;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .before-after {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 15px 0;
        }
        .suggestion-item {
            background: #333;
            padding: 10px;
            border-radius: 5px;
            margin: 5px 0;
            border-left: 3px solid #555;
        }
        .suggestion-item.before {
            border-left-color: #f44336;
        }
        .suggestion-item.after {
            border-left-color: #4caf50;
        }
        code {
            background: #444;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 12px;
        }
        .success {
            color: #4caf50;
            font-weight: bold;
        }
        .error {
            color: #f44336;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>üß™ Teste: Sugest√µes IA com Labels Amig√°veis</h1>
    
    <div class="test-section">
        <h2>üìã Status do Sistema</h2>
        <div id="system-status"></div>
    </div>

    <div class="test-section">
        <h2>üîÑ Convers√£o de Sugest√µes - Antes vs Depois</h2>
        <div class="before-after">
            <div>
                <h3>‚ùå ANTES (Nomes T√©cnicos)</h3>
                <div id="before-suggestions"></div>
            </div>
            <div>
                <h3>‚úÖ DEPOIS (Nomes Amig√°veis)</h3>
                <div id="after-suggestions"></div>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>üìù Prompt Simulado para IA</h2>
        <div id="ai-prompt" style="background: #444; padding: 15px; border-radius: 5px; white-space: pre-wrap; font-family: monospace; font-size: 12px;"></div>
    </div>

    <script src="public/friendly-labels.js"></script>
    <script>
        // Dados de teste simulando sugest√µes reais
        const mockSuggestions = [
            {
                type: 'band_adjust',
                message: 'Banda low_bass abaixo do ideal',
                action: 'Boost low_bass em ~2.8dB'
            },
            {
                type: 'band_adjust', 
                message: 'Banda upper_bass abaixo do ideal',
                action: 'Boost upper_bass em ~1.6dB'
            },
            {
                type: 'band_adjust',
                message: 'Banda mid abaixo do ideal', 
                action: 'Boost mid em ~1.4dB'
            },
            {
                type: 'band_adjust',
                message: 'Banda high_mid acima do ideal',
                action: 'High-mid acima do alvo (+5.2dB). Considere reduzir ~2.1 dB em 2‚Äì6 kHz'
            },
            {
                type: 'band_adjust',
                message: 'Banda brilho acima do ideal',
                action: 'Brilho/agudos acima do alvo (+6.1dB). Aplique shelf suave >8‚Äì10 kHz (~1.7 dB)'
            },
            {
                type: 'band_adjust',
                message: 'Banda presenca abaixo do ideal',
                action: 'Boost presenca em ~3.0dB'
            },
            {
                type: 'band_group_adjust',
                message: 'Graves com v√°rias bandas fora do alvo',
                action: 'Aplicar EQ geral nos graves (ajuste m√©dio ~15.9dB)'
            },
            {
                type: 'band_group_adjust',
                message: 'M√©dios com v√°rias bandas fora do alvo', 
                action: 'Aplicar EQ geral nos m√©dios (ajuste m√©dio ~6.9dB)'
            },
            {
                type: 'band_group_adjust',
                message: 'Agudos com v√°rias bandas fora do alvo',
                action: 'Aplicar EQ geral nos agudos (ajuste m√©dio ~18.3dB)'
            }
        ];

        function checkSystemStatus() {
            const statusDiv = document.getElementById('system-status');
            const checks = [
                {
                    name: 'friendly-labels.js carregado',
                    test: () => typeof window.convertSuggestionsToFriendly === 'function'
                },
                {
                    name: 'FRIENDLY_METRIC_LABELS dispon√≠vel',
                    test: () => window.FRIENDLY_METRIC_LABELS && Object.keys(window.FRIENDLY_METRIC_LABELS).length > 0
                },
                {
                    name: 'FRIENDLY_BAND_LABELS dispon√≠vel', 
                    test: () => window.FRIENDLY_BAND_LABELS && Object.keys(window.FRIENDLY_BAND_LABELS).length > 0
                }
            ];

            let html = '';
            checks.forEach(check => {
                const passed = check.test();
                html += `<div class="${passed ? 'success' : 'error'}">
                    ${passed ? '‚úÖ' : '‚ùå'} ${check.name}
                </div>`;
            });

            statusDiv.innerHTML = html;
        }

        function renderSuggestions() {
            const beforeDiv = document.getElementById('before-suggestions');
            const afterDiv = document.getElementById('after-suggestions');

            // Antes - sugest√µes originais
            let beforeHtml = '';
            mockSuggestions.forEach(s => {
                beforeHtml += `<div class="suggestion-item before">
                    <strong>Tipo:</strong> <code>${s.type}</code><br>
                    <strong>Mensagem:</strong> ${s.message}<br>
                    <strong>A√ß√£o:</strong> ${s.action}
                </div>`;
            });

            // Depois - sugest√µes convertidas
            let afterHtml = '';
            if (typeof window.convertSuggestionsToFriendly === 'function') {
                const converted = window.convertSuggestionsToFriendly(mockSuggestions);
                converted.forEach(s => {
                    afterHtml += `<div class="suggestion-item after">
                        <strong>Tipo:</strong> <code>${s.type}</code><br>
                        <strong>Mensagem:</strong> ${s.message}<br>
                        <strong>A√ß√£o:</strong> ${s.action}
                    </div>`;
                });
            } else {
                afterHtml = '<div class="error">‚ùå Fun√ß√£o de convers√£o n√£o dispon√≠vel</div>';
            }

            beforeDiv.innerHTML = beforeHtml;
            afterDiv.innerHTML = afterHtml;
        }

        function generateAIPrompt() {
            const promptDiv = document.getElementById('ai-prompt');
            
            if (typeof window.convertSuggestionsToFriendly === 'function') {
                const converted = window.convertSuggestionsToFriendly(mockSuggestions);
                
                let prompt = 'üí° SUGEST√ïES:\n';
                converted.forEach(s => {
                    prompt += `‚Ä¢ ${s.message} ‚Üí ${s.action}\n`;
                });
                
                promptDiv.innerHTML = prompt;
            } else {
                promptDiv.innerHTML = '‚ùå N√£o foi poss√≠vel gerar o prompt - fun√ß√£o de convers√£o n√£o dispon√≠vel';
            }
        }

        // Executar testes
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                checkSystemStatus();
                renderSuggestions();
                generateAIPrompt();
            }, 100);
        });
    </script>
</body>
</html>
