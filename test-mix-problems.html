<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üß™ Teste: Problemas Cr√≠ticos da Mix</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; }
        .test-case { margin: 20px 0; padding: 15px; border-radius: 8px; border-left: 4px solid #ddd; }
        .critical { border-left-color: #F44336; background: rgba(244, 67, 54, 0.1); }
        .major { border-left-color: #FF9800; background: rgba(255, 152, 0, 0.1); }
        .normal { border-left-color: #4CAF50; background: rgba(76, 175, 80, 0.1); }
        .result { margin-top: 10px; padding: 10px; background: #f8f9fa; border-radius: 4px; }
        .title { font-weight: bold; color: #333; margin-bottom: 8px; }
        .explanation { margin: 8px 0; line-height: 1.4; }
        .action { font-weight: 500; color: #d32f2f; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Teste: Classifica√ß√£o de Problemas na Mix</h1>
        
        <div class="test-case critical">
            <h2>üö® Caso 1: Diferen√ßa Extrema (-15.1dB)</h2>
            <p><strong>Cen√°rio:</strong> Presen√ßa muito baixa (como no seu caso)</p>
            <div id="test1" class="result">Processando...</div>
        </div>
        
        <div class="test-case major">
            <h2>‚ö†Ô∏è Caso 2: Diferen√ßa Significativa (+12.3dB)</h2>
            <p><strong>Cen√°rio:</strong> Graves muito altos</p>
            <div id="test2" class="result">Processando...</div>
        </div>
        
        <div class="test-case normal">
            <h2>‚úÖ Caso 3: Diferen√ßa Normal (+4.1dB)</h2>
            <p><strong>Cen√°rio:</strong> Pequeno ajuste necess√°rio</p>
            <div id="test3" class="result">Processando...</div>
        </div>
    </div>

    <script src="./suggestion-text-generator.js"></script>
    <script>
        const generator = new SuggestionTextGenerator();
        
        // Teste 1: Diferen√ßa extrema (-15.1dB) - deve ser CR√çTICO
        const test1Suggestion = {
            message: "Banda presenca abaixo do ideal",
            action: "Boost presenca em ~4.0dB", 
            details: "Valor -26.20dB vs alvo -11.10dB | dif -15.10dB | limites [-13.57, -8.63] (alta)"
        };
        
        // Teste 2: Diferen√ßa significativa (+12.3dB) - deve ser PROBLEMA SIGNIFICATIVO
        const test2Suggestion = {
            message: "Banda low_bass acima do ideal",
            action: "Cortar low_bass em ~3.2dB",
            details: "Valor 2.30dB vs alvo -10.00dB | dif +12.30dB | limites [-12.00, -8.00] (alta)"
        };
        
        // Teste 3: Diferen√ßa normal (+4.1dB) - deve ser normal
        const test3Suggestion = {
            message: "Banda mid acima do ideal", 
            action: "Cortar mid em ~2.1dB",
            details: "Valor -6.90dB vs alvo -11.00dB | dif +4.10dB | limites [-13.00, -9.00] (media)"
        };
        
        function displayResult(elementId, suggestion, expectedType) {
            const result = generator.generateDidacticText(suggestion);
            const element = document.getElementById(elementId);
            
            let status = '';
            let statusColor = '';
            
            if (result.isCritical) {
                if (result.title.includes('CR√çTICO')) {
                    status = 'üö® CR√çTICO (correto!)';
                    statusColor = '#F44336';
                } else if (result.title.includes('SIGNIFICATIVO')) {
                    status = '‚ö†Ô∏è SIGNIFICATIVO (correto!)';
                    statusColor = '#FF9800';
                } else {
                    status = 'üö® CR√çTICO (gen√©rico)';
                    statusColor = '#F44336';
                }
            } else {
                status = '‚úÖ NORMAL (correto!)';
                statusColor = '#4CAF50';
            }
            
            element.innerHTML = `
                <div class="title" style="color: ${statusColor};">${status}</div>
                <div class="title">${result.title}</div>
                <div class="explanation">${result.explanation}</div>
                <div class="action">${result.action}</div>
                <div style="font-size: 12px; margin-top: 8px; opacity: 0.7;">
                    <strong>T√©cnico:</strong> ${result.technical}
                </div>
            `;
        }
        
        // Executar testes
        displayResult('test1', test1Suggestion, 'critical');
        displayResult('test2', test2Suggestion, 'major');
        displayResult('test3', test3Suggestion, 'normal');
    </script>
</body>
</html>
