<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste: L√≥gica Corrigida de Sugest√µes</title>
    <style>
        body {
            background: #1a1a1a;
            color: #fff;
            font-family: 'Segoe UI', system-ui, sans-serif;
            margin: 20px;
        }
        .test-section {
            background: #2a2a2a;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .test-case {
            background: #333;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 4px solid #4caf50;
        }
        .expected {
            color: #4caf50;
            font-weight: bold;
        }
        .actual {
            color: #52c7f7;
            font-weight: bold;
        }
        .correct {
            color: #4caf50;
        }
        .incorrect {
            color: #f44336;
        }
        .calculation {
            background: #444;
            padding: 10px;
            border-radius: 3px;
            margin: 5px 0;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>üßÆ Teste: L√≥gica Corrigida de Sugest√µes vs Tabela Visual</h1>
    
    <div class="test-section">
        <h2>üìä Casos Reais da Sua An√°lise</h2>
        <div id="real-cases"></div>
    </div>

    <div class="test-section">
        <h2>‚úÖ Valida√ß√£o da L√≥gica</h2>
        <div id="logic-validation"></div>
    </div>

    <script>
        // Casos reais baseados na sua an√°lise
        const realCases = [
            {
                band: 'Graves (60-120Hz)',
                currentValue: -15.95,
                targetValue: -8.00,
                visualSays: 'DIMINUIR 7.9',
                expectSuggestion: 'Cortar Graves'
            },
            {
                band: 'Graves Altos (120-200Hz)', 
                currentValue: -15.87,
                targetValue: -12.00,
                visualSays: 'DIMINUIR 3.9',
                expectSuggestion: 'Cortar Graves Altos'
            },
            {
                band: 'M√©dios Agudos (2-4kHz)',
                currentValue: -5.97,
                targetValue: -11.20,
                visualSays: 'DIMINUIR 5.2',
                expectSuggestion: 'Cortar M√©dios Agudos'
            },
            {
                band: 'Agudos (4-8kHz)',
                currentValue: -8.73,
                targetValue: -14.80,
                visualSays: 'DIMINUIR 6.1',
                expectSuggestion: 'Cortar Agudos'
            }
        ];

        function analyzeLogic() {
            const realDiv = document.getElementById('real-cases');
            const logicDiv = document.getElementById('logic-validation');
            
            let realHtml = '';
            let logicHtml = '';
            let allCorrect = true;

            realCases.forEach((testCase, index) => {
                const diff = testCase.currentValue - testCase.targetValue;
                const shouldReduce = diff > 0;
                const shouldBoost = diff < 0;
                const expectedAction = shouldReduce ? 'Cortar' : 'Boost';
                const isCorrect = testCase.expectSuggestion.includes(expectedAction);
                
                if (!isCorrect) allCorrect = false;

                realHtml += `<div class="test-case">
                    <h4>${testCase.band}</h4>
                    <div class="calculation">
                        Valor atual: ${testCase.currentValue}dB
                        Target: ${testCase.targetValue}dB
                        Diferen√ßa: ${diff > 0 ? '+' : ''}${diff.toFixed(2)}dB
                    </div>
                    <div>
                        <span class="expected">Tabela Visual diz:</span> ${testCase.visualSays}<br>
                        <span class="actual">L√≥gica corrigida:</span> ${expectedAction} ${testCase.band}<br>
                        <span class="${isCorrect ? 'correct' : 'incorrect'}">
                            ${isCorrect ? '‚úÖ CORRETO' : '‚ùå AINDA ERRADO'}
                        </span>
                    </div>
                </div>`;
            });

            logicHtml = `<div class="test-case">
                <h4>üß† Valida√ß√£o da L√≥gica</h4>
                <div class="calculation">
                    Nova L√≥gica Implementada:
                    ‚Ä¢ Se diff > 0 (atual > target) ‚Üí CORTAR/REDUZIR ‚úÖ
                    ‚Ä¢ Se diff < 0 (atual < target) ‚Üí BOOST/AUMENTAR ‚úÖ
                    
                    Esta √© a MESMA l√≥gica da interface visual!
                </div>
                <div class="${allCorrect ? 'correct' : 'incorrect'}">
                    <strong>${allCorrect ? 'üéØ SISTEMA CORRIGIDO!' : '‚ö†Ô∏è AINDA H√Å PROBLEMAS'}</strong>
                </div>
            </div>`;

            realDiv.innerHTML = realHtml;
            logicDiv.innerHTML = logicHtml;
        }

        // Executar an√°lise
        analyzeLogic();
    </script>
</body>
</html>
