<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ” Debug Score vs Interface</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #1a1a2e; color: #fff; }
        .explanation { background: #16213e; padding: 20px; margin: 20px 0; border-radius: 8px; border-left: 4px solid #4CAF50; }
        .problem { background: rgba(244, 67, 54, 0.1); padding: 20px; margin: 20px 0; border-radius: 8px; border-left: 4px solid #f44336; }
        .solution { background: rgba(76, 175, 80, 0.1); padding: 20px; margin: 20px 0; border-radius: 8px; border-left: 4px solid #4CAF50; }
        pre { background: #0d1421; padding: 15px; border-radius: 4px; overflow-x: auto; }
        .test-box { background: #16213e; padding: 15px; margin: 10px 0; border-radius: 8px; }
        .score-example { display: flex; justify-content: space-between; padding: 10px; margin: 5px 0; border-radius: 4px; }
        .green-score { background: rgba(76, 175, 80, 0.2); }
        .yellow-score { background: rgba(255, 193, 7, 0.2); }
        .red-score { background: rgba(244, 67, 54, 0.2); }
    </style>
</head>
<body>
    <h1>ğŸ” Debug: Score vs Interface Colors</h1>
    
    <div class="explanation">
        <h2>ğŸ¯ AnÃ¡lise do Problema</h2>
        <p><strong>SituaÃ§Ã£o reportada:</strong> "3 verde, 1 amarelo, 8 vermelho mas score Ã© 50"</p>
        <p><strong>HipÃ³tese:</strong> VocÃª estÃ¡ olhando as cores dos <em>diagnÃ³sticos/bandas</em> e nÃ£o dos <em>sub-scores de qualidade</em>.</p>
    </div>

    <div class="problem">
        <h3>ğŸš¨ Duas Escalas Diferentes!</h3>
        <p>O sistema tem <strong>duas</strong> escalas de cor completamente diferentes:</p>
        
        <h4>1. Sub-Scores de Qualidade (5 categorias):</h4>
        <div class="test-box">
            <div class="score-example green-score">
                <span>Dynamics: 85/100</span> <span>ğŸŸ¢ Verde (â‰¥80)</span>
            </div>
            <div class="score-example yellow-score">
                <span>Technical: 65/100</span> <span>ğŸŸ¡ Amarelo (60-79)</span>
            </div>
            <div class="score-example red-score">
                <span>Loudness: 13/100</span> <span>ğŸ”´ Vermelho (&lt;60)</span>
            </div>
            <p><strong>Score Final:</strong> MÃ©dia ponderada dos 5 valores numÃ©ricos</p>
        </div>

        <h4>2. DiagnÃ³sticos/Bandas (atÃ© 12+ itens):</h4>
        <div class="test-box">
            <div class="score-example green-score">
                <span>Sub: -17.3 dB</span> <span>ğŸŸ¢ Verde (dentro tolerÃ¢ncia)</span>
            </div>
            <div class="score-example yellow-score">
                <span>Low Bass: -12.1 dB</span> <span>ğŸŸ¡ Amarelo (1-2x tolerÃ¢ncia)</span>
            </div>
            <div class="score-example red-score">
                <span>Mid: -8.2 dB</span> <span>ğŸ”´ Vermelho (&gt;2x tolerÃ¢ncia)</span>
            </div>
            <p><strong>Cores baseadas em:</strong> TolerÃ¢ncia do gÃªnero musical</p>
        </div>
    </div>

    <div class="solution">
        <h3>âœ… ExplicaÃ§Ã£o da InconsistÃªncia</h3>
        
        <h4>CenÃ¡rio ProvÃ¡vel:</h4>
        <pre>Sub-Scores de Qualidade (influenciam score final):
â”œâ”€â”€ Dynamics: 75/100    (ğŸŸ¡ amarelo)
â”œâ”€â”€ Technical: 85/100   (ğŸŸ¢ verde)  
â”œâ”€â”€ Stereo: 90/100      (ğŸŸ¢ verde)
â”œâ”€â”€ Loudness: 13/100    (ğŸ”´ vermelho)
â””â”€â”€ Frequency: 40/100   (ğŸ”´ vermelho)

Score Final: (75*0.25 + 85*0.15 + 90*0.20 + 13*0.20 + 40*0.20) â‰ˆ 50/100

DiagnÃ³sticos de Bandas (nÃ£o influenciam score):
â”œâ”€â”€ ğŸŸ¢ Sub: -17.3 dB (ok)
â”œâ”€â”€ ğŸŸ¢ Low Bass: -14.6 dB (ok)  
â”œâ”€â”€ ğŸŸ¢ Upper Bass: -14.8 dB (ok)
â”œâ”€â”€ ğŸŸ¡ Low Mid: -10.4 dB (amarelo)
â”œâ”€â”€ ğŸ”´ Mid: -8.2 dB (vermelho)
â”œâ”€â”€ ğŸ”´ High Mid: -18.1 dB (vermelho)
â”œâ”€â”€ ğŸ”´ Brilho: -22.3 dB (vermelho)
â”œâ”€â”€ ğŸ”´ PresenÃ§a: -29.8 dB (vermelho)
â”œâ”€â”€ ğŸ”´ Clipping: 0.3% (vermelho)
â”œâ”€â”€ ğŸ”´ DR: 5.2 dB (vermelho)
â”œâ”€â”€ ğŸ”´ LUFS: -0.5 (vermelho)
â””â”€â”€ ğŸ”´ True Peak: +1.2 dB (vermelho)</pre>

        <p><strong>Total:</strong> 3 verde + 1 amarelo + 8 vermelho = 12 diagnÃ³sticos</p>
        <p><strong>Mas:</strong> Score final = 50 (baseado nos 5 sub-scores, nÃ£o nos 12 diagnÃ³sticos)</p>
    </div>

    <div class="test-box">
        <h3>ğŸ§® Teste do CÃ¡lculo</h3>
        <button onclick="testCalculation()" id="testBtn">Testar CÃ¡lculo Manual</button>
        <div id="result"></div>
    </div>

    <script>
        function testCalculation() {
            // Valores de exemplo que dariam score ~50 mas com a distribuiÃ§Ã£o que vocÃª viu
            const subScores = {
                dynamics: 75,    // MÃ©dia
                technical: 85,   // Boa
                stereo: 90,      // Boa  
                loudness: 13,    // Ruim (LUFS -0.5)
                frequency: 40    // Ruim
            };
            
            const weights = {
                dynamics: 0.25,
                frequency: 0.20,
                stereo: 0.20,
                loudness: 0.20,
                technical: 0.15
            };
            
            const score = Math.round(
                subScores.dynamics * weights.dynamics +
                subScores.frequency * weights.frequency +
                subScores.stereo * weights.stereo +
                subScores.loudness * weights.loudness +
                subScores.technical * weights.technical
            );
            
            // Contar cores dos sub-scores
            const scores = Object.values(subScores);
            const green = scores.filter(s => s >= 80).length;
            const yellow = scores.filter(s => s >= 60 && s < 80).length;
            const red = scores.filter(s => s < 60).length;
            
            document.getElementById('result').innerHTML = `
                <h4>Resultado do Teste:</h4>
                <pre>Sub-Scores:
Dynamics: ${subScores.dynamics}/100 (${subScores.dynamics >= 80 ? 'ğŸŸ¢' : subScores.dynamics >= 60 ? 'ğŸŸ¡' : 'ğŸ”´'})
Technical: ${subScores.technical}/100 (${subScores.technical >= 80 ? 'ğŸŸ¢' : subScores.technical >= 60 ? 'ğŸŸ¡' : 'ğŸ”´'})
Stereo: ${subScores.stereo}/100 (${subScores.stereo >= 80 ? 'ğŸŸ¢' : subScores.stereo >= 60 ? 'ğŸŸ¡' : 'ğŸ”´'})
Loudness: ${subScores.loudness}/100 (${subScores.loudness >= 80 ? 'ğŸŸ¢' : subScores.loudness >= 60 ? 'ğŸŸ¡' : 'ğŸ”´'})
Frequency: ${subScores.frequency}/100 (${subScores.frequency >= 80 ? 'ğŸŸ¢' : subScores.frequency >= 60 ? 'ğŸŸ¡' : 'ğŸ”´'})

Sub-Scores Colors: ${green} verde, ${yellow} amarelo, ${red} vermelho
Score Final: ${score}/100

âœ… Se vocÃª viu "3 verde, 1 amarelo, 8 vermelho" mas score Ã© 50,
   vocÃª estava olhando os DIAGNÃ“STICOS (12 itens) 
   e nÃ£o os SUB-SCORES (5 itens)!</pre>
            `;
        }
    </script>
</body>
</html>
