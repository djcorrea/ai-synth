<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste: Corre√ß√£o band: prefix</title>
    <style>
        body {
            background: #1a1a1a;
            color: #fff;
            font-family: 'Segoe UI', system-ui, sans-serif;
            margin: 20px;
        }
        .test-section {
            background: #2a2a2a;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .before-after {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 15px 0;
        }
        .suggestion-item {
            background: #333;
            padding: 10px;
            border-radius: 5px;
            margin: 5px 0;
            border-left: 3px solid #555;
        }
        .suggestion-item.before {
            border-left-color: #f44336;
        }
        .suggestion-item.after {
            border-left-color: #4caf50;
        }
        .success {
            color: #4caf50;
        }
        .error {
            color: #f44336;
        }
        .highlight {
            background: #444;
            padding: 2px 4px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <h1>üîß Teste: Corre√ß√£o do Prefixo "band:"</h1>
    
    <div class="test-section">
        <h2>üß™ Teste da Fun√ß√£o getFriendlyLabel</h2>
        <div id="get-friendly-test"></div>
    </div>

    <div class="test-section">
        <h2>üîÑ Teste da Convers√£o de Sugest√µes</h2>
        <div class="before-after">
            <div>
                <h3>‚ùå ANTES (Com band:)</h3>
                <div id="before-conversion"></div>
            </div>
            <div>
                <h3>‚úÖ DEPOIS (Sem band:)</h3>
                <div id="after-conversion"></div>
            </div>
        </div>
    </div>

    <script src="public/friendly-labels.js"></script>
    <script>
        // Dados de teste exatos do problema
        const problemSuggestions = [
            {
                type: "band_adjust",
                message: "Banda band:Graves (60-120Hz) abaixo do ideal",
                action: "Boost band:Graves (60-120Hz) em ~2.8dB"
            },
            {
                type: "band_adjust",
                message: "Banda band:M√©dios Agudos (2-4kHz) acima do ideal",
                action: "High-M√©dios (500-2kHz) acima do alvo (+5.2dB). Considere reduzir ~2.1 dB em 2‚Äì6 kHz"
            },
            {
                type: "band_adjust",
                message: "Banda band:Presen√ßa (8-12kHz) abaixo do ideal",
                action: "Boost band:Presen√ßa (8-12kHz) em ~3.0dB"
            }
        ];

        function testGetFriendlyLabel() {
            const testDiv = document.getElementById('get-friendly-test');
            const testCases = [
                'band:low_bass',
                'band:high_mid', 
                'band:presenca',
                'low_bass',
                'high_mid'
            ];

            let html = '<h4>Teste getFriendlyLabel():</h4>';
            testCases.forEach(testCase => {
                const result = window.getFriendlyLabel && window.getFriendlyLabel(testCase);
                const isCorrect = result && !result.includes('band:');
                html += `<div class="${isCorrect ? 'success' : 'error'}">
                    <span class="highlight">${testCase}</span> ‚Üí <strong>${result}</strong>
                    ${isCorrect ? ' ‚úÖ' : ' ‚ùå (ainda cont√©m band:)'}
                </div>`;
            });

            testDiv.innerHTML = html;
        }

        function testConversion() {
            const beforeDiv = document.getElementById('before-conversion');
            const afterDiv = document.getElementById('after-conversion');

            // Antes
            let beforeHtml = '';
            problemSuggestions.forEach(s => {
                beforeHtml += `<div class="suggestion-item before">
                    <strong>Mensagem:</strong> ${s.message}<br>
                    <strong>A√ß√£o:</strong> ${s.action}
                </div>`;
            });

            // Depois
            let afterHtml = '';
            if (typeof window.convertSuggestionsToFriendly === 'function') {
                const converted = window.convertSuggestionsToFriendly(problemSuggestions);
                converted.forEach(s => {
                    const hasPrefix = s.message.includes('band:') || s.action.includes('band:');
                    afterHtml += `<div class="suggestion-item after">
                        <strong>Mensagem:</strong> ${s.message}${hasPrefix ? ' ‚ùå' : ' ‚úÖ'}<br>
                        <strong>A√ß√£o:</strong> ${s.action}${hasPrefix ? ' ‚ùå' : ' ‚úÖ'}
                    </div>`;
                });
            } else {
                afterHtml = '<div class="error">‚ùå Fun√ß√£o n√£o dispon√≠vel</div>';
            }

            beforeDiv.innerHTML = beforeHtml;
            afterDiv.innerHTML = afterHtml;
        }

        // Executar testes
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                testGetFriendlyLabel();
                testConversion();
            }, 100);
        });
    </script>
</body>
</html>
